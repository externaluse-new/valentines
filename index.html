<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Valentine Love Game ğŸ’–</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root{--pink:#ff4d6d}
body{
  margin:0;min-height:100vh;font-family:Poppins,sans-serif;
  display:flex;justify-content:center;align-items:center;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);overflow:hidden;
}
.container{
  width:94%;max-width:420px;background:white;
  border-radius:28px;padding:30px;text-align:center;
  box-shadow:0 25px 60px rgba(0,0,0,.3);
}
h2{font-family:Pacifico,cursive;color:var(--pink)}
.center-btn{
  margin-top:30px;
}
button{
  width:100%;
  padding:16px;
  border-radius:40px;
  font-size:18px;
  border:none;
  background:var(--pink);
  color:white;
  font-weight:600;
  box-shadow:0 15px 30px rgba(255,77,109,.45);
}
.option{
  width:100%;
  padding:14px;
  border-radius:30px;
  margin:10px 0;
  background:#ffe5ec;
  color:#c9184a;
  font-size:16px;
  font-weight:600;
}
#card{
  display:none;aspect-ratio:9/16;
  padding:20px;border-radius:20px;
  color:white;background:linear-gradient(135deg,#ff4d6d,#ff85a1);
}
.score{font-size:52px;font-weight:700}

#musicToggle{
  position:fixed;top:12px;right:12px;
  background:white;color:var(--pink);
  border-radius:50%;width:46px;height:46px;
  font-size:20px;
}

#hearts span{
  position:fixed;bottom:-20px;
  animation:floatUp 7s linear infinite;
}
@keyframes floatUp{
  from{transform:translateY(0);opacity:1}
  to{transform:translateY(-120vh);opacity:0}
}
</style>
</head>

<body>

<button id="musicToggle" onclick="toggleMusic()">ğŸµ</button>
<audio id="bgm" src="bgm.mp3" loop></audio>
<div id="hearts"></div>

<div class="container">

  <!-- Start Screen -->
  <div id="start">
    <h2>Valentine Love Game ğŸ’–</h2>
    <p>Tap to begin the fun ğŸ˜˜</p>
    <button class="center-btn" onclick="startQuiz()">Start ğŸ’˜</button>
  </div>

  <!-- Quiz -->
  <div id="quiz" style="display:none">
    <h2 id="q"></h2>
    <div id="a"></div>
  </div>

  <!-- Result Card -->
  <div id="card">
    <h2>Happy Valentineâ€™s Day ğŸ’–</h2>
    <div class="score" id="score">0%</div>
    <p id="wish"></p>
    <p id="quote"></p>
    <button onclick="shareCard()">Send to Crush ğŸ˜</button>
    <button onclick="location.reload()">Play Again ğŸ’</button>
  </div>

</div>

<script>
const bgm=document.getElementById("bgm");

function fadeIn(){
  bgm.volume=0;
  bgm.play();
  let v=0;
  const i=setInterval(()=>{
    v+=0.02;
    bgm.volume=Math.min(v,0.2);
    if(v>=0.2)clearInterval(i);
  },100);
}
function fadeOut(){
  let v=bgm.volume;
  const i=setInterval(()=>{
    v-=0.02;
    bgm.volume=Math.max(v,0);
    if(v<=0){bgm.pause();clearInterval(i)}
  },100);
}
function toggleMusic(){ bgm.paused?fadeIn():fadeOut(); }

const questions=[
 {q:"If I call you at midnightâ€¦ ğŸ˜",a:["Answer always ğŸ’•","Call back later ğŸ˜œ","Ignore ğŸ˜ˆ"]},
 {q:"Love language?",a:["Kisses ğŸ˜˜","Time â³","Compliments ğŸ’¬"]},
 {q:"Ideal date?",a:["Drive + music ğŸ¶","Cuddles ğŸ›‹ï¸","Adventure âœ¨"]},
 {q:"What melts you?",a:["Forehead kiss ğŸ’“","Holding hands ğŸ¤","Surprises ğŸ"]},
 {q:"Be my Valentine forever? ğŸ¥º",a:["YES ğŸ’–","No ğŸ˜"]}
];

const quotes=[
 "Forever looks better with you ğŸ’˜",
 "You had me at hello ğŸ’•",
 "Love feels like home ğŸ¤",
 "With you, everything is sweeter ğŸ’–"
];

let index=0;
const qEl=document.getElementById("q"),aEl=document.getElementById("a");

function startQuiz(){
  fadeIn();
  document.getElementById("start").style.display="none";
  document.getElementById("quiz").style.display="block";
  loadQ();
}

function loadQ(){
  qEl.textContent=questions[index].q;
  aEl.innerHTML="";
  questions[index].a.forEach(ans=>{
    const b=document.createElement("button");
    b.textContent=ans;
    b.className="option";
    b.onclick=(e)=>next(ans,e);
    aEl.appendChild(b);
  });
}

function next(ans,e){
  if(index===questions.length-1 && ans.includes("No")){
    if(navigator.vibrate) navigator.vibrate(150);
    e.target.style.position="absolute";
    e.target.style.left=Math.random()*70+"%";
    e.target.style.top=Math.random()*70+"%";
    return;
  }
  index++;
  index<questions.length?loadQ():finish();
}

function animateScore(val){
  let c=0;
  const el=document.getElementById("score");
  const i=setInterval(()=>{
    c++;
    el.textContent=c+"%";
    if(c>=val)clearInterval(i);
  },20);
}

function finish(){
  document.getElementById("quiz").style.display="none";
  document.getElementById("card").style.display="block";
  const score=Math.floor(Math.random()*11)+90;
  animateScore(score);
  document.getElementById("wish").textContent="Your love vibe is irresistible ğŸ’–";
  document.getElementById("quote").textContent=quotes[Math.floor(Math.random()*quotes.length)];
}

async function shareCard(){
  const canvas=await html2canvas(document.getElementById("card"));
  canvas.toBlob(blob=>{
    const file=new File([blob],"valentine-story.png",{type:"image/png"});
    if(navigator.canShare && navigator.canShare({files:[file]})){
      navigator.share({
        files:[file],
        title:"Valentine Love Game ğŸ’–",
        text:"Play this cute Valentine game ğŸ˜ "+window.location.href
      });
    }else{
      const a=document.createElement("a");
      a.href=URL.createObjectURL(blob);
      a.download="valentine-story.png";
      a.click();
    }
  });
}

setInterval(()=>{
  const h=document.createElement("span");
  h.innerHTML="ğŸ’–";
  h.style.left=Math.random()*100+"vw";
  h.style.fontSize=Math.random()*20+16+"px";
  document.getElementById("hearts").appendChild(h);
  setTimeout(()=>h.remove(),7000);
},500);
</script>
</body>
</html>
